<div class="breadcrumb breadcrumb-unstyled">
  <div class="container">
    <div class="breadcrumb-inner">
      <ul class="list-inline list-unstyled nopadding">
        <li><a href="/"><%= t"Home" %></a></li>
        <li class=''><%= t"Sell An Item" %></li>
        <li class='active'><%= t"Create Product Variants" %></li>
      </ul>
    </div>
  </div>
</div>

<div class="body-content outer-top-bd">
  <div class="container">
    <div class="col-sm-12"><h2><%= t"Create Product Variants" %></h2>
    </div>
    <div class="col-sm-12">
      <div class="checkout-box inner-bottom-sm">
      <div class="row">
        <div class="col-md-12">
          <div class="table-responsive">
            <table class="table table-bordered table-hover table-striped table-styled">
              <thead>
                <th>#</th>
                <th><%= t"Photos" %></th>
                <th><%= t"Variant Details" %></th>
                <th><%= t"Actions" %></th>
              </thead>
              <tbody>
                <%= form_for @product, :url => create_variants_product_path(@product), html: {class: "form-vertical register-form outer-top-xs product-form form_ajax", method: "POST", :remote => true} do |f| %>
                  <%= f.fields_for :product_variants do |variants_form| %>
                   <% row_index = variants_form.options[:child_index] %>
                    <tr>
                      <td widht="10%"><%= row_index + 1 %></td>
                      <td width="40%">
                        <div class="gallery-ajax"></div>
                        <% klass = "variant_photo_ids_#{row_index}" %> <!-- css class to find which element to append photo after uploading-->
                        <a href="<%= new_product_photo_path(data_replace_value: "." + klass) %>" class="ajax-popup-link"><%= t"Upload photos" %></a>
                        <%= variants_form.hidden_field :product_photo_ids, class: "#{klass} photo_preview_list"%>
                      </td>
                      <td width="40%">
                        <div class="form-group">
                          <label for="exampleInputEmail1"><%= t"Name" %></label>
                          <%= variants_form.text_field :name, class: "form-control unicase-form-control text-input input-styling"%>
                        </div>
                      
                        <div class="col-xs-12 nopadding">
                          <div class="form-group col-xs-12 col-md-6 nopadding">
                            <label for="exampleInputEmail1"><%= t"Price" %></label>
                            <div class="input-group">
                              <div class="input-group-addon">$</div>
                              <%= variants_form.text_field :price, class: "form-control unicase-form-control text-input input-styling"%>
                            </div>
                          </div>

                          <div class="form-group col-xs-12 col-md-6">
                            <label for="exampleInputEmail1"><%= t"Quantity" %></label>
                            <%= variants_form.number_field :stock_quantity, class: "form-control unicase-form-control text-input input-styling" %>
                          </div>
                        </div>
                      </td>
                      <td width="10%" class="table-actions">
                        <i class="fa fa-trash fa-lg"></i>
                      </td>
                    </tr>
                  <% end %>
                <% end %>
              </tbody>
            </table>
            <div class="form-actions">
              <button type="submit" class="btn-upper btn btn-success pull-right"><%= t"Submit" %></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
